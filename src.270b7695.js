parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"LqgX":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"NkmY":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("eventemitter3")),r=function(){function t(){this.eventEmitter=new e.default,this.health=1,this.toughness=0,this.attack=0}return t.prototype.destroy=function(){console.log("Plant model destroy"),this.eventEmitter.emit("destroy",this)},t.create=function(e){var r=new t;return r.type=e.type||0,r.toughness=e.toughness||.5,r.attack=e.attack||.5,r},t}();exports.default=r;
},{"eventemitter3":"LqgX"}],"cJS6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(){this.toughness=.5,this.attack=.5}}();exports.default=t;
},{}],"TYYX":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("eventemitter3")),r=function(){function t(){this.eventEmitter=new e.default}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){var e=this._state;this._state=t,this.eventEmitter.emit("state-change",this,e)},enumerable:!1,configurable:!0}),t.create=function(e){var r=new t;return r.type=e.type||0,r.progress=0,r.health=1,r.speed=e.speed||1,r.attack=e.attack||1,r.toughness=e.toughness||1,r},t}();exports.default=r;
},{"eventemitter3":"LqgX"}],"kaU9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(){this.attack=.5,this.toughness=.5}}();exports.default=t;
},{}],"wOlz":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./plant")),a=e(require("./plant-spec")),n=e(require("./zombie")),s=e(require("./zombie-spec")),p=function(){function e(){this._zombieSpecs=[];var e=new s.default;e.type=0,e.name="Normal",e.speed=.6,e.attack=.5,this._zombieSpecs.push(e),(e=new s.default).type=1,e.name="Cone Head",e.speed=.4,e.attack=.9,this._zombieSpecs.push(e),this._plantSpecs=[];var t=new a.default;t.type=0,t.name="Brick",t.toughness=.9,this._plantSpecs.push(t),(t=new a.default).type=1,t.name="Salad",t.toughness=.1,this._plantSpecs.push(t),(t=new a.default).type=2,t.name="Chilli",t.toughness=.8,t.attack=.8,this._plantSpecs.push(t),(t=new a.default).type=3,t.name="Cherry",t.toughness=.5,this._plantSpecs.push(t)}return Object.defineProperty(e.prototype,"numPlants",{get:function(){return this._plantSpecs.length},enumerable:!1,configurable:!0}),e.prototype.createZombie=function(e){var t=this._zombieSpecs[e];return n.default.create(t)},e.prototype.createPlant=function(e){var a=this._plantSpecs[e];return t.default.create(a)},e}();exports.default=p;
},{"./plant":"NkmY","./plant-spec":"cJS6","./zombie":"TYYX","./zombie-spec":"kaU9"}],"lIxz":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("eventemitter3")),n=function(){function t(t,n){this.rowIndex=t,this.colIndex=n,this.eventEmitter=new e.default}return t.prototype.addPlant=function(t){var e=this;this.plant=t,this.plant.eventEmitter.addListener("destroy",function(t){console.log("Square destroy plant ",t),e.plant=null,e.eventEmitter.emit("destroy",e)}),this.eventEmitter.emit("plant-added",this)},t}();exports.default=n;
},{"eventemitter3":"LqgX"}],"Gdu4":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("eventemitter3")),i=e(require("./square")),r=function(){function e(e){this.index=e,this.squares=[],this.zombies=[],this.eventEmitter=new t.default}return e.create=function(t,r){for(var n=new e(r),o=0;o<t;o++){var s=new i.default(r,o);n.squares.push(s),s.eventEmitter.addListener("plant-added",function(e){console.log("Row plant added ",e),n.eventEmitter.emit("plant-added",e)})}return n},e.prototype.addZombie=function(e){e.parent=this,this.zombies.push(e),this.eventEmitter.emit("add",e);var t=this;e.eventEmitter.addListener("remove",function(i){t.removeZombie(e)})},e.prototype.removeZombie=function(e){var t=this.zombies.indexOf(e);-1!=t?(this.zombies.splice(t,1),this.eventEmitter.emit("remove",e)):console.log("Zombie not found")},e}();exports.default=r;
},{"eventemitter3":"LqgX","./square":"lIxz"}],"pjIr":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("eventemitter3")),r=e(require("./plant-spec")),s=e(require("./row")),n=function(){return function(){var e=this;this.numCols=9,this.numRows=5,this.eventEmitter=new t.default,this.rows=[];for(var n=0;n<this.numRows;n++){var i=s.default.create(this.numCols,n);i.eventEmitter.addListener("plant-added",function(t){console.log("model plant added ",t),e.eventEmitter.emit("plant-added",t)}),this.rows.push(i)}for(this.plants=[],n=0;n<4;n++){var u=new r.default;this.plants.push(u)}}}();exports.default=n;
},{"eventemitter3":"LqgX","./plant-spec":"cJS6","./row":"Gdu4"}],"P5CY":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("eventemitter3")),r=function(){function e(e){var r=this;this._model=e,this.debug=!0,this._squareSize=100,this.eventEmitter=new t.default,this._zombieStartX=this._model.numCols*this._squareSize,this._zombiesToEl=new Map,this._model.eventEmitter.addListener("plant-added",function(e){console.log("renderer heard model plant-added"),r.addPlant(e)})}return e.prototype.createPlantMenu=function(){var e=document.querySelector("#plant-menu");this._model.plants.forEach(function(t,r){var n=document.createElement("div");n.innerHTML='\n        <div class="plantish plant-button" type="'+r+'">\n          Plant '+r+"\n        </div>\n      ",e.appendChild(n)})},e.prototype.creatRow=function(e,t){var r=this,n=document.createElement("div");return n.classList.add("row"),n.style.top=t*this._squareSize+"px",e.squares.forEach(function(e,i){var a=r.createSquare(i);a.setAttribute("row",String(t)),a.setAttribute("col",String(i));r._model.numCols;var o=0;i%2==0&&o++,t%2!=0&&o++,a.classList.add("square"),a.classList.add(["green-light","green-med","green-dark"][o]),n.appendChild(a)}),n},e.prototype.createSquare=function(e){var t=document.createElement("div");return t.classList.add("square"),t.style.left=this._squareSize*e+"px",t.style.width=this._squareSize+"px",t.style.height=this._squareSize+"px",t},e.prototype.createZombie=function(e){var t=document.createElement("div");return t.classList.add("zombie"),t.setAttribute("type",e.type),t.style.left=this._squareSize*this._model.numCols+"px",t.style.width=this._squareSize+"px",t.style.height=this._squareSize+"px",this._zombiesToEl.set(e,t),e.eventEmitter.addListener("state-change",function(e,r){t.classList.remove(r),e.state&&t.classList.add(e.state)}),this.debug&&this.addDebugger(t,e),t},e.prototype.removeZombie=function(e){var t=this._zombiesToEl.get(e);t&&t.parentElement.removeChild(t)},e.prototype.addPlant=function(e){var t=document.createElement("div");return t.classList.add("plant"),t.classList.add("plantish"),t.innerHTML,e.plant.type,t.setAttribute("type",""+e.plant.type),this.getSquareElement(e).appendChild(t),e.eventEmitter.addListener("destroy",this.removePlantHandler.bind(this)),t},e.prototype.removePlantHandler=function(e){console.log("renderer destroy plant");var t=this.getSquareElement(e),r=t.querySelector(".plant");t.removeChild(r)},e.prototype.getSquareElement=function(e){return document.querySelector('.square[row="'+e.rowIndex+'"][col="'+e.colIndex+'"]')},e.prototype.addDebugger=function(e,t){var r=document.createElement("div");r.classList.add("debugger"),r.innerHTML="I am a debugger",e.appendChild(r)},e.prototype.updateDebugger=function(e,t){var r=e.querySelector(".debugger");r&&(r.innerHTML=""+parseInt(100*t.health,10))},e.prototype.init=function(){var e=this,t=document.querySelector("#game");this.createPlantMenu(),document.querySelectorAll(".plant-button").forEach(function(t){t.addEventListener("click",function(){console.log("Select plant "+t.getAttribute("type")),e.eventEmitter.emit("plant-selected",t.getAttribute("type"))})}),this._model.rows.forEach(function(r,n){r.eventEmitter.addListener("remove",function(t){var r=e._zombiesToEl.get(t);r.parentElement.removeChild(r)});var i=e.creatRow(r,n);t.appendChild(i),r.zombies.forEach(function(t){var r=e.createZombie(t);i.appendChild(r)}),r.eventEmitter.addListener("add",function(t){var r=e.createZombie(t);i.appendChild(r)})}),t.querySelectorAll(".square").forEach(function(t){t.addEventListener("click",function(){console.log("Square Click!"),e.eventEmitter.emit("square-click",t.getAttribute("row"),t.getAttribute("col"))})})},e.prototype.render=function(){var e=this;this._model.rows.forEach(function(t,r){t.zombies.forEach(function(t){var r=e._zombiesToEl.get(t);r&&(r.style.left=e._zombieStartX-t.progress*e._zombieStartX+"px",e.debug&&e.updateDebugger(r,t))}),t.squares.forEach(function(t){var r=e.getSquareElement(t);t.plant&&(r.querySelector(".plant").innerHTML=t.plant.type+" - "+t.plant.health)})})},e}();exports.default=r;
},{"eventemitter3":"LqgX"}],"dgAm":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./entity-manager")),r=e(require("./model")),a=e(require("./renderer")),n=function(){function e(){var e=this;this._currentPlant=0,this._entityManager=new t.default,this._model=new r.default,this._renderer=new a.default(this._model),this._renderer.init(),this._renderer.eventEmitter.addListener("square-click",function(t,r){console.log("Game square-click ",t,r),e.addPlantToModel(t,r,e._currentPlant)}),this._renderer.eventEmitter.addListener("plant-selected",function(t){console.log("Game plant selected "+t),e._currentPlant=t}),this.startGame()}return e.prototype.gameLoop=function(){var e=this;this._endGame||(this._model.rows.forEach(function(t){if(t.zombies.forEach(function(r){var a=1/e._model.numCols*.5,n=e._model.numCols-Math.ceil((r.progress-a)*e._model.numCols);r.squareN=n;var o=t.squares[n];if(o&&o.plant){r.state="eating";var s=o.plant,i=(s.attack+s.toughness)/2*.02,l=(r.attack+r.toughness)/2*.02;r.health-=i,s.health-=l,r.health<=0&&r.parent.removeZombie(r),o.plant.health<=0&&(o.plant.destroy(),r.state="")}else r.state&&(r.state=""),r.progress+=.005*r.speed;r.progress>=1&&r.parent.removeZombie(r)}),e.randomAdd()&&t.zombies.length<1){var r=Math.round(Math.random());t.addZombie(e._entityManager.createZombie(r))}}),this._renderer.render())},e.prototype.randomAdd=function(){return Math.random()<.05},e.prototype.startGame=function(){setInterval(this.gameLoop.bind(this),50)},e.prototype.addPlantToModel=function(e,t,r){console.log("Game.addPlant",e,t);var a=this._model.rows[e].squares[t];if(a.plant)console.log("Square already has a plant");else{var n=this._entityManager.createPlant(r);a.addPlant(n)}},e}();exports.default=n;
},{"./entity-manager":"wOlz","./model":"pjIr","./renderer":"P5CY"}],"B6dB":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./game")),r=new t.default;
},{"./game":"dgAm"}]},{},["B6dB"], null)
//# sourceMappingURL=/plants-vs-zombies/src.270b7695.js.map